<html><head><link href="main.css" rel="stylesheet"></head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.01"><title>Bardo</title><body class="full"><div id="root"><canvas id="ui"></canvas><canvas id="map"></canvas><canvas id="gameplay"></canvas></div><script>(()=>{var t={712:function(t,i,s){"use strict";var e=this&&this.t||function(){return e=Object.assign||function(t){for(var i,s=1,e=arguments.length;s<e;s++)for(var n in i=arguments[s])Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t},e.apply(this,arguments)};Object.defineProperty(i,"i",{value:!0}),i.o=i.h=void 0;var n=s(839),o=s(603);!function(t){t.u="width",t.l="height"}(i.h||(i.h={}));var r=function(){function t(t,i){var s;void 0===i&&(i={}),this.context=t,this.coords=null!==(s=i.coords)&&void 0!==s?s:new n.v({canvas:t.canvas});var o={beginPath:!0,closePath:!1,fill:!1,p:void 0,M:!0,stroke:!1,m:!1,g:!1,_:!1};this.options=e(e({},o),i),this.options.O=e(e({},{fontFamily:"sans-serif",fontSize:16}),i.O)}return t.prototype.rect=function(t,i,s,e,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===e&&(e=1),void 0===n&&(n={}),this.j(n),this.context.rect(this.S(t,n),this.A(i,n),this.R(s,n),this.R(e,n)),this.N(n)},t.prototype.k=function(t,i){void 0===i&&(i={}),this.j(i);for(var s=0;s<t.length;s++){var e=this.S(t[s][0],i),n=this.A(t[s][1],i);0===s?this.context.moveTo(e,n):this.context.lineTo(e,n)}this.N(i)},t.prototype.C=function(t,i){var s=this;void 0===i&&(i={}),this.j(i);for(var e=0;e<t.length-1;e++){var n=this.S(t[e][0],i),o=this.A(t[e][1],i);if(0===e)this.context.moveTo(n,o);else{var r=this.S(t[e+1][0],i),h=this.A(t[e+1][1],i);if(r===n&&h===o)this.context.lineTo(r,h);else{var u=(n+r)/2,a=(o+h)/2;this.context.quadraticCurveTo(n,o,u,a)}}}t.slice(-1).forEach((function(t){s.context.lineTo(s.S(t[0],i),s.A(t[1],i))})),this.N(i)},t.prototype.P=function(t,i,s,e){void 0===e&&(e={}),this.j(e),this.context.arc(this.S(t,e),this.A(i,e),this.R(s,e),0,n.D),this.N(e)},t.prototype.drawImage=function(t,i,s,e){void 0===e&&(e={}),this.j(e),this.context.drawImage(t,this.S(i,e),this.A(s,e)),this.N(e)},t.prototype.W=function(t,i,s,o,r,h){void 0===h&&(h={}),this.k((0,n.W)(this.S(t,h),this.A(i,h),this.R(s,h),o,r),e(e({},h),{m:!1,M:!0}))},t.prototype.T=function(t,i,s,o,r){void 0===r&&(r={}),this.k((0,n.T)(this.S(t,r),this.A(i,r),this.R(s,r),o),e(e({},r),{m:!1,M:!0}))},t.prototype.L=function(t){this.F(e(e({},this.options.O),t))},t.prototype.text=function(t,i,s,e){void 0===e&&(e={}),this.j(e),this.context.fillText(t,this.S(i,e),this.A(s,e),this.H("maxTextWidth",e)),this.N(e)},t.prototype.clear=function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)},t.prototype.I=function(t,i){void 0===i&&(i={}),t.width=t.clientWidth*(i.B?o.U:1),t.height=t.clientHeight*(i.B?o.U:1)},t.prototype.S=function(t,i){return void 0===i&&(i={}),this.H("useNormalCoordinates",i)?this.coords.J(t):t},t.prototype.A=function(t,i){return void 0===i&&(i={}),this.H("useNormalCoordinates",i)?this.coords.K(t):t},t.prototype.R=function(t,i){void 0===i&&(i={});var s=this.H("scalarNormalization",i);return"width"===s?this.coords.width(t):"height"===s?this.coords.height(t):t},t.prototype.H=function(t,i){return i&&t in i?i[t]:this.options[t]},t.prototype.Y=function(t,i){var s=i&&t in i?i[t]:this.options.O[t];return"function"==typeof s?s(this.coords):s},t.prototype.q=function(t){var i=this.Y("fontSize",t),s=this.Y("lineHeight",t),e=this.Y("fontStyle",t),n=this.Y("fontFamily",t),o=this.Y("fontWeight",t),r=this.Y("fontStretch",t),h="number"==typeof i?"".concat(i,"px"):void 0;return s&&h&&(h="".concat(i," / ").concat(s,"}")),[h,n,e,o,r].join(" ").trim()},t.prototype.F=function(t){for(var i in t){var s=this.Y(i,t);if(!(0,n.G)(s)){if("transform"===i&&this.context.setTransform(s),"translation"===i){var e=s,o=e.x,r=e.y;this.context.translate(this.S(o),this.A(r))}if("rotation"===i)if("number"==typeof s)this.context.rotate(s);else{var h=s,u=h.rotation,a=h.origin,c=this.S(a.x),f=this.A(a.y);this.context.translate(c,f),this.context.rotate(u),this.context.translate(-c,-f)}if("scale"===i)if("origin"in s){var l=s,v=l.origin,d=l.scale,p=l.V,w=void 0!==p&&p;c=this.S(v.x),f=this.A(v.y);this.context.translate(c,f),this.context.scale(d.x,d.y),this.context.translate(-c,-f),w&&(this.context.lineWidth=this.context.lineWidth*(1/((d.x+d.y)/2)))}else{var M=s;o=M.x,r=M.y;this.context.scale(o,r)}"lineDash"===i&&this.context.setLineDash(s),"alpha"===i&&(this.context.globalAlpha=s),i in this.context&&"function"!=typeof this.context[i]&&(this.context[i]=this.Y(i,t))}}this.context.font=this.q(t)},t.prototype.j=function(t){void 0===t&&(t={}),this.H("saveAndRestore",t)&&this.context.save(),this.H("skipApplyStyles",t)||this.L(t.O),this.H("beginPath",t)&&this.context.beginPath()},t.prototype.N=function(t){this.H("closePath",t)&&this.context.closePath(),this.H("fill",t)&&this.context.fill(),this.H("stroke",t)&&this.context.stroke(),this.H("saveAndRestore",t)&&this.context.restore()},t}();i.o=r},367:function(t,i,s){"use strict";var e,n=this&&this.X||(e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},e(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),o=this&&this.t||function(){return o=Object.assign||function(t){for(var i,s=1,e=arguments.length;s<e;s++)for(var n in i=arguments[s])Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t},o.apply(this,arguments)};Object.defineProperty(i,"i",{value:!0}),i.Z=void 0;var r=s(839),h=s(285),u=s(358),a=function(t){function i(i,s){var e=t.call(this,i,s)||this;return e.options=o(o({},{$:.025,tt:!1}),e.options),e}return n(i,t),i.prototype.k=function(t,i){void 0===i&&(i={});var s,e=t.length-1,n=this.H("useNormalCoordinates",i),u=[this.coords.it[0],this.coords.st[1],this.coords.it[1],this.coords.st[0]];s=n?r.et.apply(void 0,u):(0,r.et)(this.coords.J(u[0]),this.coords.K(u[1]),this.coords.J(u[2]),this.coords.K(u[3]));for(var a=0;a<2;a++){for(var c=[],f=0;f<e;f++){var l=t[f],v=l[0],d=l[1],p=t[f+1],w=p[0],M=p[1],b=(0,r.et)(v,d,w,M),m=this.options.$*b,g=Math.min(1,b/s);if(m*=.1*(1-(0,h.nt)(g)),i.tt&&f===e-1){c.push(c[0]);break}for(var _=0;_<4;_++){var O=Math.random()*m,y=Math.random()*r.D,j=O*Math.cos(y),x=O*Math.sin(y),S=NaN,A=NaN;if(0===_&&(S=v+j,A=d+x),1===_){S=(0,r.ot)(.5,v,w)+j,A=(0,r.ot)(.5,d,M)+x}if(2===_){S=(0,r.ot)(.75,v,w)+j,A=(0,r.ot)(.75,d,M)+x}3===_&&(S=w+j,A=M+x),c.push([S,A])}}var R=0===a?i:o(o({},i),{fill:!1});this.C(c,R)}},i.prototype.P=function(t,i,s,e){void 0===e&&(e={});for(var n=this.options.$*this.R(s,e)/window.innerWidth,h=0;h<2;h++){for(var u=[],a=0;a<16;a++){var c=Math.random()*n,f=Math.random()*r.D,l=c*Math.cos(f),v=c*Math.sin(f),d=r.D*a/16,p=this.S(t+l,e)+Math.cos(d)*this.R(s,e),w=this.A(i+v,e)+Math.sin(d)*this.R(s,e);u.push([p,w])}u[16]=u[0],u[17]=u[1],this.C(u,o(o({},e),{m:!1,M:!0,tt:!0}))}},i.prototype.rect=function(t,i,s,e,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===e&&(e=1),void 0===n&&(n={});var r=this.S(t),h=this.A(i),u=this.R(s),a=this.R(e),c=[[r,h],[r+u,h],[r+u,h+a],[r,h+a],[r,h]];this.k(c,o(o({},n),{m:!1,M:!0,tt:!0}))},i.prototype.rt=function(t,i){this.context.save(),this.L(i);var s=this.context.measureText(t);return this.context.restore(),s},i.prototype.text=function(i,s,e,n){var h=this;void 0===n&&(n={});var a=this.rt(i,n.O),c=a.actualBoundingBoxAscent,f=a.actualBoundingBoxDescent,l=a.width,v=i.split(""),d=c-f,p=this.coords.ht(d),w=l/v.length,M=this.coords.ut(w)-this.coords.ut(0),b=M*v.length;this.L(n.O),v.forEach((function(i,a){var c,f;if("left"===h.context.textAlign)f=(c=s+M*a)+M/2;else if("right"===h.context.textAlign)f=(c=-b+s+M*(a+1))-M/2;else{if("center"!==h.context.textAlign)throw new Error("textAlign must be 'left', 'right', or 'center' to use rough text");f=c=-b/2+s+M*(.5+a)}var l,v=e;if("top"===h.context.textBaseline)l=v-p/2;else if("bottom"===h.context.textBaseline)l=v-p/2;else{if("middle"!==h.context.textBaseline)throw new Error("textBaseline must be 'top', 'bottom', or 'middle' to use rough text");l=v}var d=[(0,u.random)(.1)*M,(0,u.random)(.1)*M],w=[(0,u.random)(.1)*p,(0,u.random)(.1)*p];t.prototype.text.call(h,i,c+d[0],v+w[0],o(o({},n),{O:o(o({},n.O),{rotation:{origin:new r.ct(f,l),rotation:h.options.$*Math.PI/16}})})),t.prototype.text.call(h,i,c+d[1],v+w[1],o(o({},n),{O:o(o({},n.O),{rotation:{origin:new r.ct(f,l),rotation:-h.options.$*Math.PI/16}})}))}))},i}(r.o);i.Z=a},659:function(t,i,s){"use strict";var e=this&&this.t||function(){return e=Object.assign||function(t){for(var i,s=1,e=arguments.length;s<e;s++)for(var n in i=arguments[s])Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t},e.apply(this,arguments)};Object.defineProperty(i,"i",{value:!0}),i.v=void 0;var n,o=s(654),r=s(796),h=s(908),u=s(482);!function(t){t.ft="up",t.lt="down"}(n||(n={}));var a=function(){function t(t){if(void 0===t&&(t={}),(0,r.G)(t.canvas)&&(0,o.vt)(t.dt,t.wt))throw new Error("Invalid options. A canvas element must be supplied if baseHeight or baseWidth are not defined.");Object.assign(this,e(e({},{it:[-1,1],st:[-1,1],Mt:!1,orientationY:"down",bt:!1}),t))}return t.prototype.gt=function(){var t;return null!==(t=this.dt)&&void 0!==t?t:this.canvas.width},t.prototype._t=function(){return this.gt()-2*this.Ot()},t.prototype.yt=function(){var t;return null!==(t=this.wt)&&void 0!==t?t:this.canvas.height},t.prototype.jt=function(){return this.yt()-2*this.xt()},t.prototype.St=function(){var t,i;return null!==(i=null!==(t=this.At)&&void 0!==t?t:this.padding)&&void 0!==i?i:0},t.prototype.Ot=function(){return this.St()*this.gt()},t.prototype.Rt=function(){return(0,r.G)(this.Nt)?(0,r.G)(this.padding)?0:this.bt?this.padding*(this.gt()/this.yt()):this.padding:this.Nt},t.prototype.xt=function(){return this.Rt()*this.yt()},t.prototype.kt=function(){var t;return null!==(t=this.offsetX)&&void 0!==t?t:0},t.prototype.Ct=function(){var t;return null!==(t=this.offsetY)&&void 0!==t?t:0},t.prototype.J=function(t){var i=(0,u.normalize)(t,this.it[0],this.it[1],this.Mt);return this.Ot()+this.kt()+i*this._t()},t.prototype.K=function(t){var i=(0,u.normalize)(t,this.st[0],this.st[1],this.Mt),s=this.zt===n.ft;return this.xt()+this.Ct()+(s?1-i:i)*this.jt()},t.prototype.ut=function(t){var i=(0,u.normalize)(t,this.Ot(),this.Ot()+this.width(),this.Mt);return(0,h.ot)(i,this.it[0],this.it[1])},t.prototype.Et=function(t){var i=(0,u.normalize)(t,this.xt(),this.xt()+this.height(),this.Mt);return(0,h.ot)(i,this.it[0],this.it[1])},t.prototype.width=function(t){return this._t()*(null!=t?t:1)},t.prototype.height=function(t){return this.jt()*(null!=t?t:1)},t.prototype.Pt=function(t){return this.ut(t)-this.ut(0)},t.prototype.ht=function(t){return this.Et(t)-this.Et(0)},t}();i.v=a},326:(t,i,s)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Dt=void 0;var e=s(839);i.Dt=function(t,i){if(t.parentElement){var s=t.parentElement,n=i.x,o=i.y,r=new ResizeObserver((function(){var i=s.getBoundingClientRect(),r=i.width,h=i.height,u=Math.min(r/n,h/o),a=t.clientWidth,c=t.clientHeight,f=Math.round(u*n),l=Math.round(u*o);f===a&&l===c||(t instanceof HTMLCanvasElement&&(t.width=f*e.U,t.height=l*e.U),t.style.width=f+"px",t.style.height=l+"px")}));return r.observe(s),r}return console.warn("aspectRatioResize: element has no parent and cannot be resized"),null}},999:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Wt=void 0;i.Wt=function(t,i,s){var e=s*Math.sqrt(3)/2;return[[t,i-2*e/3],[t+s/2,i*(e/3)],[t-s/2,i*(e/3)]]}},125:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Tt=void 0;i.Tt=function(t,i,s,e){var n=Math.sqrt(e*e/4-s*s);return[[t,i-2*n/3],[t+e/2,i*(n/3)],[t-e/2,i*(n/3)]]}},932:(t,i,s)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.T=void 0;var e=s(965);i.T=function(t,i,s,n){void 0===n&&(n=5);for(var o=[],r=0,h=n;r<=h;r++){var u=-e.PI/(2*n)+e.D*(r/h);o.push([t+Math.cos(u)*s,i+Math.sin(u)*s])}return o}},166:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Lt=void 0;i.Lt=function(t,i,s,e,n){return[Math.cos(n)*(t-s)-Math.sin(n)*(i-e)+s,Math.sin(n)*(t-s)+Math.cos(n)*(i-e)+e]}},154:(t,i,s)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.W=void 0;var e=s(965);i.W=function(t,i,s,n,o){void 0===n&&(n=5),void 0===o&&(o=.4);for(var r=[],h=0,u=2*n;h<=u;h++){var a=-e.PI/(2*n)+e.D*(h/u),c=h%2;r.push([t+Math.cos(a)*(0===c?s:s*o),i+Math.sin(a)*(0===c?s:s*o)])}return r}},839:function(t,i,s){"use strict";var e=this&&this.Ft||(Object.create?function(t,i,s,e){void 0===e&&(e=s),Object.defineProperty(t,e,{Ht:!0,get:function(){return i[s]}})}:function(t,i,s,e){void 0===e&&(e=s),t[e]=i[s]}),n=this&&this.It||function(t,i){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(i,s)||e(i,t,s)};Object.defineProperty(i,"i",{value:!0}),n(s(712),i),n(s(367),i),n(s(659),i),n(s(603),i),n(s(147),i),n(s(654),i),n(s(796),i),n(s(90),i),n(s(466),i),n(s(92),i),n(s(159),i),n(s(600),i),n(s(965),i),n(s(908),i),n(s(250),i),n(s(482),i),n(s(674),i),n(s(326),i),n(s(999),i),n(s(125),i),n(s(932),i),n(s(166),i),n(s(154),i)},603:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.U=void 0,i.U=window.devicePixelRatio||1},90:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Bt=void 0;i.Bt=function(t){return JSON.parse(JSON.stringify(t))}},147:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Ut=void 0;i.Ut=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.every((function(t){return void 0===t}))}},654:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.vt=void 0;i.vt=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.some((function(t){return void 0===t}))}},796:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.G=void 0;i.G=function(t){return void 0===t}},466:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Jt=void 0;i.Jt=function(t){for(new Date;new Date-t<ms;);}},674:(t,i,s)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.ct=void 0;var e=s(159),n=function(){function t(t,i){this.x=t,this.y=i}return Object.defineProperty(t.prototype,"ratio",{get:function(){return this.x/this.y},Ht:!1,Kt:!0}),Object.defineProperty(t.prototype,"Yt",{get:function(){return Math.pow(Math.pow(this.x,2)+Math.pow(this.y,2),.5)},Ht:!1,Kt:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.qt=function(t){return(0,e.et)(this.x,this.y,t.x,t.y)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},t.prototype.normalize=function(){var t=this.Yt;return 0!==t&&(this.x/=t,this.y/=t),this},t.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},t.from=function(i,s){return new t(i.x-s.x,i.y-s.y)},t}();i.ct=n},600:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Mt=void 0;i.Mt=function(t,i,s){return Math.max(Math.min(s,t),i)}},92:(t,i,s)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Gt=i.Vt=void 0;var e=s(159);i.Vt=function(t,i,s,n,o,r){return(0,e.et)(t,i,n,o)<=s+r};i.Gt=function(t,i,s,e,n,o,r,h){return!(i+e<o||i>o+h||t+s<n||t>n+r)}},965:(t,i,s)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Xt=i.PI=i.D=void 0;var e=s(674);i.D=2*Math.PI,i.PI=Math.PI,i.Xt=new e.ct(0,0)},159:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.Qt=i.et=void 0;i.et=function(t,s,e,n){return Math.pow((0,i.Qt)(t,s,e,n),.5)};i.Qt=function(t,i,s,e){return Math.pow(s-t,2)+Math.pow(e-i,2)}},285:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.nt=i.Zt=i.$t=void 0;i.$t=function(t){return t*t};i.Zt=function(t){return t*(2-t)};i.nt=function(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}},908:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.ot=void 0;i.ot=function(t,i,s){return i*(1-t)+s*t}},250:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.ti=void 0;i.ti=function(t,i){return(t%i+i)%i}},482:(t,i,s)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.normalize=void 0;var e=s(600);i.normalize=function(t,i,s,n){return void 0===n&&(n=!1),((n?(0,e.Mt)(t,i,s):t)-i)/(s-i)}},358:(t,i)=>{"use strict";Object.defineProperty(i,"i",{value:!0}),i.random=void 0;i.random=function(t,i){return void 0===t&&(t=1),void 0===i&&(i=0),i+Math.random()*(t-i)}},557:function(t){var i;t.exports=(i=function(){function t(t){return n.appendChild(t.ii),t}function s(t){for(var i=0;i<n.children.length;i++)n.children[i].style.display=i===t?"block":"none";e=t}var e=0,n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(t){t.preventDefault(),s(++e%n.children.length)}),!1);var o=(performance||Date).now(),r=o,h=0,u=t(new i.si("FPS","#0ff","#002")),a=t(new i.si("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new i.si("MB","#f08","#201"));return s(0),{ei:16,ii:n,ni:t,oi:s,ri:function(){o=(performance||Date).now()},end:function(){h++;var t=(performance||Date).now();if(a.update(t-o,200),t>r+1e3&&(u.update(1e3*h/(t-r),100),r=t,h=0,c)){var i=performance.memory;c.update(i.hi/1048576,i.ui/1048576)}return t},update:function(){o=this.end()},ai:n,ci:s}},i.si=function(t,i,s){var e=1/0,n=0,o=Math.round,r=o(window.devicePixelRatio||1),h=80*r,u=48*r,a=3*r,c=2*r,f=3*r,l=15*r,v=74*r,d=30*r,p=document.createElement("canvas");p.width=h,p.height=u,p.style.cssText="width:80px;height:48px";var w=p.getContext("2d");return w.font="bold "+9*r+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=s,w.fillRect(0,0,h,u),w.fillStyle=i,w.fillText(t,a,c),w.fillRect(f,l,v,d),w.fillStyle=s,w.globalAlpha=.9,w.fillRect(f,l,v,d),{ii:p,update:function(u,M){e=Math.min(e,u),n=Math.max(n,u),w.fillStyle=s,w.globalAlpha=1,w.fillRect(0,0,h,l),w.fillStyle=i,w.fillText(o(u)+" "+t+" ("+o(e)+"-"+o(n)+")",a,c),w.drawImage(p,f+r,l,v-r,d,f,l,v-r,d),w.fillRect(f+v-r,l,r,d),w.fillStyle=s,w.globalAlpha=.9,w.fillRect(f+v-r,l,r,o((1-u/M)*d))}}},i)}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e].call(o.exports,o,o.exports,s),o.exports}s.n=t=>{var i=t&&t.i?()=>t.default:()=>t;return s.d(i,{a:i}),i},s.d=(t,i)=>{for(var e in i)s.fi(i,e)&&!s.fi(t,e)&&Object.defineProperty(t,e,{Ht:!0,get:i[e]})},s.fi=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),(()=>{"use strict";var t=s(839),i=s(557),e=s.n(i);const n=[[[58,46],[69,43],[76,39],[76,43],[71,50],[63,50],[60,49],[58,46]],[[49,0],[34,3],[23,12],[14,24],[12,39],[14,62],[21,80],[33,91],[49,97],[63,91],[75,81],[83,64],[86,39],[83,24],[75,12],[63,3],[49,0]],[[46,47],[44,59],[40,55],[36,54],[33,57],[29,64],[31,75],[43,87],[35,84],[24,75],[19,63],[17,50],[17,33],[21,22],[28,12],[41,5],[34,11],[31,15],[30,31],[32,37],[38,40],[41,37],[43,30],[45,36],[46,43],[43,45],[46,47]],[[56,87],[65,78],[69,69],[67,60],[62,54],[59,55],[54,60],[53,48],[56,46],[53,43],[54,32],[56,30],[58,40],[63,40],[66,37],[69,27],[67,15],[65,11],[58,5],[70,12],[77,22],[81,33],[81,50],[79,63],[77,71],[70,79],[63,84],[56,87]],[[40,46],[28,43],[21,39],[21,43],[26,50],[34,50],[37,49],[40,46]]],o=[[[22,38],[35,87],[37,89],[44,92],[55,92],[60,89],[64,84],[76,38],[74,35],[59,22],[49,20],[38,22],[29,29],[22,38]],[[31,52],[45,55],[40,61],[35,59],[31,52]],[[58,61],[56,60],[54,55],[67,52],[62,59],[58,61]],[[58,25],[59,17],[63,12],[68,8],[76,7],[83,8],[88,12],[92,17],[94,25],[93,29],[89,38]],[[74,35],[89,52],[86,54],[83,55],[79,55],[75,51],[72,40],[74,35]],[[40,25],[38,17],[34,12],[29,8],[22,7],[15,8],[10,12],[6,17],[5,29],[9,38]],[[25,35],[9,52],[11,54],[14,55],[19,55],[22,51],[25,40],[25,35]]],r=[[[49,22],[63,11],[73,10],[82,11],[89,17],[95,24],[97,34],[95,39],[90,48],[49,90],[7,48],[2,39],[1,34],[2,24],[8,17],[15,11],[25,10],[34,11],[49,22]]],h=[[[95,56],[75,43],[51,35],[43,53],[40,65],[40,82],[44,91],[49,95],[54,96],[65,94],[72,90],[86,74],[96,59],[95,56]],[[53,85],[49,80],[47,68],[56,79],[71,80],[59,85],[53,85]],[[73,71],[67,65],[76,65],[81,72],[73,71]],[[54,62],[49,55],[57,56],[63,62],[54,62]],[[39,47],[33,49],[27,56],[31,45],[36,42],[42,42],[44,36],[48,29],[52,29],[57,31],[55,20],[49,2],[24,7],[2,19],[11,42],[23,57],[35,63],[39,47]],[[43,22],[51,25],[43,29],[35,25],[43,22]],[[25,36],[16,38],[20,31],[29,29],[25,36]]],u=[[[62,12],[58,3],[50,0],[42,3],[39,12],[42,20],[50,24],[58,20],[62,12]],[[93,33],[91,28],[87,27],[14,27],[9,28],[7,33],[9,37],[14,39],[39,39],[39,92],[41,96],[46,99],[52,94],[53,83],[58,82],[74,73],[76,70],[76,63],[62,53],[62,39],[87,39],[91,37],[93,33]],[[53,69],[53,63],[57,66],[53,69]]],a=[[[49,67],[41,65],[36,61],[32,56],[31,49],[32,41],[36,35],[41,31],[49,30],[56,31],[62,35],[66,41],[68,49],[66,56],[62,61],[56,65],[49,67]],[[84,67],[76,63],[73,56],[76,48],[84,45],[91,48],[95,56],[91,63],[84,67]],[[62,25],[54,21],[51,14],[54,5],[62,2],[69,5],[73,14],[69,21],[62,25]],[[14,25],[6,21],[3,14],[6,5],[14,2],[21,5],[25,14],[21,21],[14,25]],[[14,88],[6,84],[3,76],[6,68],[14,65],[21,68],[25,76],[21,84],[14,88]],[[68,95],[60,91],[57,84],[60,76],[68,73],[75,76],[79,84],[75,91],[68,95]],[[57,22],[61,23],[57,34],[53,32],[57,22]],[[66,50],[75,52],[74,56],[66,54],[66,50]],[[59,63],[65,75],[62,76],[55,65],[59,63]],[[22,19],[39,36],[36,38],[19,22],[22,19]],[[34,58],[37,61],[23,72],[20,69],[34,58]]],c=[[[34,48],[20,48],[28,51],[39,51],[39,47],[34,48]],[[30,28],[25,31],[27,33],[35,38],[41,39],[30,28]],[[34,40],[24,33],[19,39],[28,41],[38,41],[34,40]],[[39,43],[28,44],[19,42],[18,43],[19,46],[33,46],[38,44],[39,43]],[[73,24],[67,19],[60,18],[56,34],[59,36],[63,32],[76,28],[73,24]],[[54,18],[49,19],[51,34],[54,34],[54,27],[58,18],[54,18]],[[40,24],[47,35],[49,34],[48,19],[32,26],[43,37],[45,36],[38,24],[39,22],[40,24]],[[65,45],[63,44],[64,47],[67,46],[65,45]],[[72,40],[62,41],[69,44],[73,41],[72,40]],[[76,31],[70,31],[60,38],[75,39],[76,31]],[[80,20],[76,13],[65,5],[58,4],[46,4],[32,7],[26,11],[16,21],[13,28],[12,36],[14,44],[21,52],[26,53],[39,53],[37,60],[23,79],[25,85],[29,89],[35,92],[47,91],[53,88],[63,79],[67,74],[65,49],[69,47],[79,37],[82,28],[80,20]],[[19,46],[19,42],[28,44],[39,43],[38,44],[33,46],[19,46]],[[49,34],[47,35],[39,22],[38,24],[39,27],[45,36],[43,37],[32,26],[48,19],[49,34]],[[41,39],[35,38],[25,31],[30,28],[41,39]],[[30,38],[38,41],[28,42],[19,40],[24,33],[30,38]],[[20,48],[29,49],[39,47],[39,51],[28,51],[20,48]],[[60,18],[67,19],[76,28],[63,32],[59,36],[56,35],[60,18]],[[57,18],[54,34],[51,34],[49,19],[57,18]],[[64,47],[63,44],[67,46],[64,47]],[[69,44],[62,41],[72,40],[73,41],[69,44]],[[75,37],[75,39],[60,38],[74,30],[76,31],[76,34],[75,37]]],f=[[[87,35],[83,21],[80,15],[70,6],[57,1],[43,1],[30,6],[20,15],[15,28],[14,35],[9,39],[7,47],[9,54],[14,59],[18,72],[26,84],[37,92],[44,95],[57,95],[63,92],[74,84],[82,72],[87,59],[94,50],[95,47],[92,39],[87,35]],[[87,45],[76,44],[76,35],[80,34],[80,41],[83,41],[87,45]],[[78,63],[76,68],[76,65],[78,63]],[[63,74],[63,63],[71,63],[73,65],[73,74],[63,74]],[[45,74],[43,73],[43,65],[45,63],[57,63],[57,74],[45,74]],[[29,74],[30,63],[38,63],[40,65],[40,73],[29,74]],[[24,63],[25,68],[24,63]],[[22,30],[25,24],[25,29],[22,30]],[[57,19],[57,30],[43,29],[43,21],[45,19],[57,19]],[[78,30],[76,29],[76,24],[78,30]],[[73,58],[71,60],[63,60],[62,56],[58,54],[57,60],[45,60],[43,58],[43,54],[40,56],[38,60],[30,60],[29,35],[38,34],[40,35],[40,38],[43,40],[43,35],[45,34],[57,34],[58,40],[62,38],[63,34],[73,35],[73,58]],[[29,29],[29,19],[38,19],[40,21],[40,29],[29,29]],[[73,19],[73,29],[63,30],[63,19],[73,19]],[[63,16],[62,11],[70,16],[63,16]],[[40,14],[38,16],[31,16],[40,11],[40,14]],[[58,9],[57,16],[45,16],[43,14],[43,9],[58,9]],[[18,41],[21,41],[21,35],[24,34],[25,44],[14,45],[18,41]],[[18,52],[14,49],[25,50],[24,60],[22,60],[21,53],[18,52]],[[31,78],[40,79],[40,86],[31,78]],[[43,88],[43,79],[58,79],[58,88],[43,88]],[[62,86],[63,78],[71,78],[62,86]],[[83,52],[80,53],[78,60],[76,58],[76,50],[87,49],[83,52]],[[38,41],[33,42],[32,47],[33,50],[38,52],[41,50],[43,47],[41,42],[38,41]],[[63,41],[59,42],[58,47],[59,50],[63,52],[67,50],[69,47],[67,42],[63,41]]],l=[[[37,36],[46,37],[53,42],[57,48],[60,58],[59,66],[56,69],[49,74],[46,84],[37,87],[31,86],[28,84],[26,74],[17,69],[14,62],[17,48],[21,42],[28,37],[37,36]],[[63,95],[68,71],[69,59],[67,45],[64,35],[58,28],[47,21],[37,19],[27,21],[15,28],[10,35],[7,45],[6,59],[6,71],[12,95]],[[14,61],[15,79],[21,95]],[[61,61],[59,79],[54,95]],[[77,21],[45,10],[29,9],[20,9],[12,13],[17,8],[25,4],[44,2],[71,6],[92,13],[77,21]],[[94,9],[82,95]],[[42,51],[39,53],[40,59],[43,63],[46,63],[51,60],[53,55],[53,51],[47,48],[42,51]],[[37,63],[34,66],[33,71],[41,71],[40,66],[37,63]],[[33,51],[30,49],[24,49],[22,51],[20,55],[24,60],[30,63],[34,59],[35,56],[33,51]]],v=[[[49,39],[41,43],[39,47],[39,52],[43,58],[47,60],[52,60],[58,56],[60,52],[60,47],[56,41],[49,39]],[[49,42],[43,45],[42,52],[45,56],[52,57],[56,54],[57,47],[54,43],[49,42]],[[16,20],[25,25],[26,24],[25,19],[22,17],[19,17],[16,20]],[[34,5],[30,5],[28,7],[28,13],[30,15],[35,15],[38,12],[37,6],[34,5]],[[65,5],[61,8],[61,12],[64,15],[69,15],[71,13],[71,7],[69,5],[65,5]],[[74,25],[83,19],[80,17],[75,18],[73,21],[74,25]],[[50,69],[49,68],[49,70],[50,69]],[[51,72],[49,71],[48,73],[50,74],[51,72]],[[52,77],[51,75],[48,75],[49,79],[51,79],[52,77]],[[50,77],[49,76],[49,78],[50,77]],[[33,36],[41,42],[33,36]],[[40,30],[45,40],[40,30]],[[49,28],[50,40],[49,28]],[[54,40],[59,30],[54,40]],[[58,42],[66,35],[58,42]],[[58,53],[67,59],[58,53]],[[54,55],[59,65],[54,55]],[[49,55],[50,67],[49,55]],[[40,64],[45,55],[40,64]],[[33,59],[41,52],[33,59]],[[33,36],[41,42],[33,36]],[[40,30],[45,40],[40,30]],[[49,28],[50,40],[49,28]],[[54,40],[59,30],[54,40]],[[58,42],[66,35],[58,42]],[[21,47],[26,50],[21,47]],[[21,47],[26,50],[21,47]],[[21,53],[25,50],[21,53]],[[21,53],[25,50],[21,53]],[[74,50],[78,53],[79,52],[74,50]],[[74,50],[78,53],[79,52],[74,50]],[[74,49],[78,46],[74,49]],[[74,49],[78,46],[74,49]],[[49,81],[50,92],[49,81]],[[47,90],[50,92],[47,90]],[[50,92],[52,90],[50,92]]],d=[[[20,39],[20,35],[13,35],[14,41],[17,42],[20,39]],[[86,37],[85,34],[81,34],[79,36],[79,40],[83,42],[86,40],[86,37]],[[25,50],[40,58],[52,60],[59,58],[74,49],[58,44],[46,43],[25,50]]],p=[[[25,49],[26,50],[44,44],[55,44],[74,50],[63,43],[52,39],[40,41],[25,49]],[[16,20],[16,26],[20,28],[24,27],[25,25],[16,20]],[[55,5],[53,1],[48,0],[45,2],[44,7],[46,10],[51,11],[54,9],[55,5]],[[74,25],[78,28],[82,27],[84,24],[83,19],[74,25]],[[21,40],[21,36],[18,34],[13,34],[11,37],[11,42],[13,44],[19,44],[21,40]],[[29,8],[28,13],[30,15],[35,14],[35,8],[29,8]],[[64,14],[69,15],[71,13],[71,9],[68,7],[64,8],[64,14]],[[78,41],[80,44],[86,44],[88,42],[87,35],[79,35],[78,41]]],w=[[[58,40],[97,40],[97,89],[3,89],[3,40],[42,40]],[[86,89],[89,81],[97,78]],[[50,53],[48,51],[48,46],[52,46],[52,51],[50,53]],[[3,78],[10,81],[14,89]],[[58,40],[55,33],[53,31],[50,31],[43,33],[41,40],[41,51],[43,56],[50,59],[55,56],[58,51],[58,40]],[[97,40],[94,23],[84,8],[16,8],[5,23],[3,40]]];var M;!function(t){t.li="gameplay",t.vi="intro",t.di="paused",t.pi="upgrade"}(M||(M={}));const b=new t.ct(32,18),m=new t.ct(b.x/2-1,b.y/2-1),g=1/b.x,_={move:{wi:!1,Mi:!1,left:!1,right:!1},bi:[],timestamp:{mi:0},gi:[],items:[],_i:M.vi,Oi:4,yi:0};class O{constructor(i,s){this.ji=[],this.xi=0,this.Si=4,this.Ai=1550,this.Ri=1,this.Ni=i=>{this.ki.drawImage(this.ji[this.xi],(0,t.ot)(i,this.Ci.x,this.position.x),(0,t.ot)(i,this.Ci.y,this.position.y))},this.zi=()=>{this.ji=((i,s,e,n,o)=>{const r=[];i.L(i.options.O);for(let h=0;h<n;h++){const n=document.createElement("canvas");n.width=e,n.height=e;const h=n.getContext("2d"),u=new t.Z(h,{...i.options,O:{...i.options.O,lineWidth:i.context.lineWidth},coords:new t.v({canvas:n,it:o,st:o})});s(u),u.context.save(),u.context.fillStyle="rgba(255,0,0,0.2)",u.context.fillRect(0,0,n.width,n.height),u.context.restore(),r.push(n)}return r})(this.ki,this.Ei,this.ki.coords.width(g*this.Ri),this.Si,this.Pi)},this.ki=i,this.position=s,this.Ci=s.clone()}update(t,i){this.Ci.set(this.position),this.xi=Math.floor(t/this.Ai%1*this.ji.length)}}const y={Di:document.querySelector("canvas#ui"),map:document.querySelector("canvas#map"),Wi:document.querySelector("canvas#gameplay")},j={Di:y.Di.getContext("2d"),map:y.map.getContext("2d"),Wi:y.Wi.getContext("2d")},x="Comic Sans MS, Chalkboard, cursive",S={strokeStyle:"white",fillStyle:"white",lineWidth:t=>t.width(.001),textAlign:"center",fontFamily:x},A={m:!0,g:"width"},R={map:new t.v({canvas:y.map,it:[0,b.x],st:[0,b.y]}),Di:new t.v({canvas:y.Di,padding:.1})},N={map:new t.o(j.map,{...A,coords:R.map,O:S,stroke:!0}),Wi:new t.Z(j.Wi,{...A,coords:R.map,O:{...S,lineWidth:t=>t.width(.00175)},stroke:!0,$:1.25}),Di:new t.Z(j.Di,{...A,coords:R.Di,O:{...S,lineWidth:t=>t.width(.01),fontSize:t=>t.width(.1),fontFamily:x}})},k=new class extends O{constructor(i,s){super(i,s),this.size=.5,this.speed=.005,this.Pi=[0,100],this.Ei=t=>{u.forEach((i=>{t.k(i)}))},this.update=(t,i)=>{super.update(t,i),this.Ti(t,i)},this.Ti=(i,s)=>{const e=s*this.speed,n=.7071*e;let o=0,r=0;_.move.left&&_.move.wi?(o=-n,r=-n):_.move.left&&_.move.Mi?(o=-n,r=n):_.move.right&&_.move.wi?(o=n,r=-n):_.move.right&&_.move.Mi?(o=n,r=n):_.move.wi?r=-e:_.move.Mi?r=e:_.move.left?o=-e:_.move.right&&(o=e),this.position.x=(0,t.Mt)(this.position.x+o,0,b.x-1),this.position.y=(0,t.Mt)(this.position.y+r,0,b.y-1)},this.Li=(t,i,s=this.position.x,e=this.position.y)=>(s-t)**2+(e-i)**2<=this.size**2,this.zi()}}(N.Wi,m.clone());class C extends O{constructor(t){super(t,k.position.clone()),this.size=.25,this.speed=5e-4,this.Pi=[-1,1],_.gi.push(this)}update(t,i){super.update(t,i),this.Ti(t,i),this.Fi()}Fi(){for(let i=0;i<_.bi.length;i++){const s=_.bi[i];(0,t.Vt)(this.position.x,this.position.y,this.Hi,s.position.x+s.Hi/2,s.position.y+s.Hi/2,s.Hi)&&s.Ii(i)}}}class z extends C{constructor(i){super(i),this.Bi=1.5,this.Hi=.25,this.Ei=t=>{t.P(0,0,this.Hi)},this.Ti=(i,s)=>{this.Ci.set(this.position);const e=t.D*i*this.speed;this.position.x=k.position.x+Math.cos(e)*this.Bi,this.position.y=k.position.y+Math.sin(e)*this.Bi},this.zi()}}const E="rgb(28,5,50)",P=()=>{N.Di.clear();for(let i=0;i<_.Oi;i++){const s=new t.v({offsetX:N.Di.coords.J(-1)+N.Di.coords.width(i/_.Oi),offsetY:N.Di.coords.K(-1),dt:N.Di.coords.width()/_.Oi,wt:N.Di.coords.height(),padding:.05}),e=new t.Z(N.Di.context,{...N.Di.options,coords:s,stroke:!1});e.rect(-1,-1,1,e.coords.height()/e.coords.width(),{stroke:_.yi===i,fill:!0,O:{fillStyle:"rgba(255,255,255,.5)"}}),e.text("TEST",0,-.8,{O:{textBaseline:"top"}})}};var D;!function(t){t[t.Ui=0]="Initialize",t[t.Ji=1]="CanvasResize",t[t.Ki=2]="Tick",t[t.Yi=3]="KeyDown",t[t.qi=4]="KeyUp",t[t.Gi=5]="StateChange"}(D||(D={}));const W={[D.Ui]:[],[D.Ji]:[],[D.Ki]:[],[D.Yi]:[],[D.qi]:[],[D.Gi]:[]},T=(t,i)=>{W[t].push(i)},L=(t,...i)=>{const s=W[t];for(let t=0;t<s.length;t++)s[t](...i)};new ResizeObserver((()=>{L(D.Ji)})).observe(y.map),window.addEventListener("keydown",(t=>{L(D.Yi,t.key)})),window.addEventListener("keyup",(t=>{L(D.qi,t.key)}));class F extends O{constructor(t,i){super(t,i)}}class H extends F{constructor(t,i){super(t,i),this.Hi=.25,this.size=.25,this.Pi=[-1,1],this.Ei=t=>{t.W(0,0,this.size)},this.zi()}}class I extends O{constructor(t,i,s){super(t,i),this.Pi=[-1,1],this.Vi=s}Xi(){return new t.ct(this.position.x+this.Hi/2,this.position.y+this.Hi/2)}Ii(t){_.bi.splice(t,1),_.items.push(new H(this.ki,this.Xi().clone()))}update(t,i){super.update(t,i),this.Ti(t,i)}Ti(i,s){this.Vi.Qi&&((i,s,e)=>{const n=t.ct.from(k.position,i).normalize().multiply(s*e.Zi);i.x+=n.x,i.y+=n.y})(this.position,s,this.Vi.Qi),this.Vi.$i&&((i,s,e)=>{const n=t.ct.from(k.position,i);if(n.Yt<e.et){const t=n.normalize().multiply(s*e.Qi);i.x+=t.x,i.y+=t.y}else{if(i.equals(e.ts))return;if(i.qt(e.ts)<.1)i.set(e.ts);else{const n=t.ct.from(e.ts,i).normalize().multiply(s*e.Qi);i.x+=n.x,i.y+=n.y}}})(this.position,s,this.Vi.$i)}}class B extends I{constructor(t,i){super(t,i,{$i:{Qi:.002,et:3,ts:i.clone()}}),this.Hi=.5,this.size=.5,this.speed=.002,this.ji=[],this.Pi=[0,100],this.Ei=t=>{o.forEach((i=>t.k(i)))},this.zi()}}class U extends I{constructor(t,i){super(t,i,{Qi:{Zi:.002}}),this.Hi=1,this.size=1,this.speed=.002,this.Ri=2,this.Pi=[0,100],this.Ei=t=>{h.forEach((i=>t.k(i)))},this.zi()}}let J=0;T(D.Ui,((i=1)=>{for(let s=0;s<i;s++){const i=Math.random()*b.x,s=Math.random()*b.y,e=new t.ct(i,s),n=new U(N.Wi,e);_.bi.push(n)}}));const K=new(e()),Y=K.ni(new(e().si)("phys","#0ff","#002"));K.ii.id="stats",document.body.appendChild(K.ii);const q=1e3/60;let G=0,V=0,X=0;const Q=(t=0)=>{K.ri();const i=_._i!==M.li?0:t-V;for(V=t,[n,o,r,h,u,a,c,f,l,v,d,p,w].forEach((()=>null)),X+=Math.min(i,50);X>=q;)Z(),X-=q,G+=q;$(X/q),K.end(),window.requestAnimationFrame(Q)},Z=()=>{Y.update(59.99999999999999,200),k.update(G,q);for(let t=0;t<_.gi.length;t++)_.gi[t].update(G,q);for(let t=0;t<_.bi.length;t++)_.bi[t].update(G,q);for(let t=0;t<_.items.length;t++)_.items[t].update(G,q);(i=>{if(i-_.timestamp.mi>1e3&&J<5){_.timestamp.mi=i;const s=Math.random()*b.x,e=Math.random()*b.y,n=new t.ct(s,e),o=new B(N.Wi,n);_.bi.push(o),J++}})(G)},$=t=>{N.Wi.clear(),k.Ni(t);for(let i=0;i<_.gi.length;i++)_.gi[i].Ni(t);for(let i=0;i<_.bi.length;i++)_.bi[i].Ni(t);for(let i=0;i<_.items.length;i++)_.items[i].Ni(t)};(0,t.Dt)(y.map,b),(0,t.Dt)(y.Wi,b),(0,t.Dt)(y.Di,b),T(D.Yi,(i=>{"ArrowLeft"!==i&&"a"!==i||(_._i===M.li&&(_.move.left=!0),_._i===M.pi&&(_.yi=(0,t.ti)(_.yi-1,_.Oi),P())),"ArrowRight"!==i&&"d"!==i||(_._i===M.li&&(_.move.right=!0),_._i===M.pi&&(_.yi=(0,t.ti)(_.yi+1,_.Oi),P())),"ArrowUp"!==i&&"w"!==i||(_.move.wi=!0),"ArrowDown"!==i&&"s"!==i||(_.move.Mi=!0),"Escape"===i&&_._i===M.li&&L(D.Gi,M.di)})),T(D.qi,(t=>{"ArrowLeft"!==t&&"a"!==t||(_.move.left=!1),"ArrowRight"!==t&&"d"!==t||(_.move.right=!1),"ArrowUp"!==t&&"w"!==t||(_.move.wi=!1),"ArrowDown"!==t&&"s"!==t||(_.move.Mi=!1),"Enter"===t&&_._i===M.di&&L(D.Gi,M.li)})),T(D.Ji,(()=>{(t=>{for(let i=0;i<b.x;i++)for(let s=0;s<b.y;s++)t.rect(i,s,1/b.x,1/b.x,{O:{strokeStyle:"rgba(255,255,255,0.1)"}})})(N.map),k.zi(),[..._.gi,..._.bi,..._.items].forEach((t=>t.zi())),_._i===M.pi&&P()})),T(D.Gi,(t=>{if(t===M.pi)_.yi=0;_._i=t})),T(D.Ui,(()=>{document.body.style.backgroundColor=E,new z(N.Wi)})),L(D.Ui),L(D.Gi,M.li),window.requestAnimationFrame(Q)})()})();</script></body></html>